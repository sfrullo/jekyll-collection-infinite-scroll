<html>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="/css/main_css_file.css">
</head>
<body>
	
	<div id="placeholder"><p>Scroll me!</p></div>

	<ul class="menu">
		<li class="menu_item"><a href="#container" data-filter="filter1">filter1</a></li>
		<li class="menu_item"><a href="#container" data-filter="filter2">filter2</a></li>
		<li class="menu_item"><a href="#container" data-filter="filter3">filter3</a></li>
		<li class="menu_item"><a href="#container" data-filter="filter4">filter4</a></li>
	</ul>

	<div id="container">
		<div class="grid__col-sizer"></div>
		<div class="grid__gutter-sizer"></zdiv>
		</div>

		<div class="page-load-status">
			<div class="loader-ellips infinite-scroll-request">
				<span class="loader-ellips__dot"></span>
				<span class="loader-ellips__dot"></span>
				<span class="loader-ellips__dot"></span>
				<span class="loader-ellips__dot"></span>
			</div>
			<p class="infinite-scroll-last">End of content</p>
			<p class="infinite-scroll-error">No more pages to load</p>
		</div>

		<!-- pagination has path -->
		<p class="pagination">
			<a class="pagination__next" href="/pages/2">Next page</a>
		</p>

		<script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
		<script type="text/javascript" src="/bower_components/masonry/dist/masonry.pkgd.min.js"></script>
		<script type="text/javascript" src="/bower_components/imagesloaded/imagesloaded.pkgd.min.js"></script>
		<script type="text/javascript" src="/bower_components/infinite-scroll/dist/infinite-scroll.pkgd.min.js"></script>
		<script type="text/javascript" src="/bower_components/isotope/dist/isotope.pkgd.min.js"></script>
		<script type="text/javascript">

			$(document).ready( function() {

				console.log('Init ...');

			// Main content container
			var $container = $('#container');

			console.log('Load ...');
			$container.load("/pages/index.html");

			console.log('Init masonry ...');
			var $grid = $container.masonry({
				itemSelector: 'none', // select none at first
				columnWidth: '.grid__col-sizer',
				gutter: '.grid__gutter-sizer',
				percentPosition: false,
				stagger: 100,
				// nicer reveal transition
				visibleStyle: { opacity: 1 },
				hiddenStyle: { opacity: 0 },
			});

			// get Masonry instance
			var msnry = $grid.data('masonry');

			// initial items reveal
			console.log('Init imagesloaded ...');
			$grid.imagesLoaded( function() {
				$grid.masonry( 'option', { itemSelector: '.pagination__item' });
				var $items = $grid.find('.pagination__item');
				$grid.masonry( 'appended', $items );
			});

			console.log('Init infiniteScroll ...');
			$grid.infiniteScroll({
				path: '/pages/{{#}}',
				append: '.pagination__item',
				status: '.page-load-status',
				hideNav: '.pagination',
				outlayer: msnry,
			})

			$container.isotope({
				itemSelector: '.pagination__item',
				percentPosition: false,
				masonry: msnry
			})

			$(".menu_item").click(function (el) {
				console.log(el)
				var filter = el.target.dataset["filter"];
				$grid.isotope({ filter : filter });
			})

		});

	</script>

</body>
</html>